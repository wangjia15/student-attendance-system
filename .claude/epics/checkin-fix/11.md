# Task 11: Enable Production WebSocket Server

## Metadata
```yaml
id: 11
epic: checkin-fix
title: Enable Production WebSocket Server
description: Enable the production-grade WebSocket server in main.py and add class-specific attendance WebSocket routes
created: 2025-09-09T14:46:43Z
size: S
estimate: 4 hours
depends_on: []
parallel: false
status: todo
priority: high
tags: [websocket, backend, foundation]
```

## Overview
Enable the production WebSocket server infrastructure that is currently commented out in main.py. This includes setting up the WebSocket manager, adding the attendance WebSocket route, and implementing connection handling for real-time class attendance updates.

## Technical Details

### Files to Modify
- `backend/main.py` - Uncomment and configure WebSocket server components (~15 lines)
- `backend/app/core/websocket.py` - Verify attendance_ws_manager is properly configured
- Potentially add WebSocket route configuration if needed

### Implementation Steps
1. Uncomment the WebSocket server setup in main.py
2. Add `/ws/attendance/{class_id}` route using existing attendance_ws_manager
3. Implement WebSocket connection handling for class-specific updates
4. Ensure proper connection lifecycle management
5. Add basic connection authentication/authorization

## Acceptance Criteria
- [ ] WebSocket server is enabled and running in main.py
- [ ] `/ws/attendance/{class_id}` endpoint is accessible
- [ ] WebSocket connections can be established to specific class attendance channels
- [ ] Connection authentication verifies user access to the specified class
- [ ] Proper connection cleanup on disconnect
- [ ] WebSocket manager properly handles multiple concurrent connections per class
- [ ] No breaking changes to existing REST API functionality

## Dependencies
None - This is a foundation task for other WebSocket integrations.

## Notes
This task enables the core WebSocket infrastructure that other tasks will build upon. The existing attendance_ws_manager should already be implemented in the websocket core module.
